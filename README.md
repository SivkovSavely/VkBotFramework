# VkBotFramework
Удобная и маленькая библиотека для создания ботов в соц. сети ВКонтакте
## Getting Started
Эти инструкция позволит вам просто и быстро сделать своего бота для вк.
### Prerequisites
На данный момент можно создавать только групповых ботов, а значит вам потребуется AccessToken и GroupId для взаимодействия с группой, а так же выставить необхдимые права доступа боту.

#### Создаем AccessToken
- Вы можете создать его в интерфейсе настроек сообщества. Для этого достаточно открыть раздел «Управление сообществом» («Управление страницей», если у Вас публичная страница), выбрать вкладку «Работа с API» и нажать «Создать ключ доступа».
- Так же необходимо зайти во вкладку Long Poll Api, перевести состояние Long Poll Api во "включен",а так же во вкладке "типы событий" выбрать нужные события, которые будут приходить боту.
- Более подробно об этом можно прочесть в [wiki](https://github.com/truecooler/VkBotFramework/wiki).
## Example
Использование крайне простое:

```c#
static void Main(string[] args)
	{
  	...
	VkBot bot = new VkBot(settings.AccessToken, settings.GroupId);
	/*подписываемся на событие о входящем сообщении*/
	bot.OnMessageReceived += MessageReceivedTest; 
	
	/*подписываемся на событие об изменении в группе*/
	bot.OnGroupUpdateReceived += UpdateReceivedTest; 
  
	/*регистрируем шаблон {регулярное выражение,ответ бота}*/
	bot.RegisterPhraseTemplate("привет", "на привет всегда отвечаю кусь"); 
	
	/*регистрируем шаблон {регулярное выражение,случайная фраза из списка}*/
	bot.RegisterPhraseTemplate("ты кто", new List<string>() {"меня зовут мишутка","вы о ком","не говори так со мной","а ты кто?"}); 
	
	/*регистрируем шаблон {регулярное выражение, user specified callback}*/
	bot.RegisterPhraseTemplate("колобок", (msg) =>
	{
		Console.WriteLine($"кто-то написал {msg.Text}, я могу регировать на эту фразу так, как я хочу! system(\"reboot\")");
	});
	/*запускаем бота с блокировкой текущего потока...*/
	bot.Start();
  	...
  }
        
```
К библиотеке прилагается пример, с которым вы можете ознакомиться [тут](https://github.com/truecooler/VkBotFramework/blob/master/VkBotExample/Program.cs)

## TODOs
- [x] Сделать подписки на события о приходе сообщения/обновления в группе
- [x] Сделать функционал регистрации шаблона {регулярная фраза,ответ/список ответов/user callback}
- [ ] Сделать асинхронный Start
- [ ] Добавить функционал кнопок
- [ ] Сделать логгирование
- [ ] Сделать тесты
- [ ] Сделать библиотеку пригодной для создания бота пользователя(без группы)

## Зависимости

* [VkNet](https://github.com/vknet/vk) - взаимодействие с Api ВКонтакте.

## Built With

* [VisualStudio](http://visualstudio.com)

## License

This project is licensed under the MIT License - see the [LICENSE.md](LICENSE.md) file for details
